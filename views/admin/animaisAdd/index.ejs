<%- include ("../../partials/header.ejs") %>
<%- include ("../../partials/navbar.ejs") %>

<div class="container my-4">
  <!-- CABEÇALHO SIMPLIFICADO -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h4 text-dark">Animais</h2>
    <a class="btn btn-primary btn-sm" href="/admin/animaisAdd/new">
      + Novo Animal
    </a>
  </div>

  <!-- LISTA DE ANIMAIS -->
  <% if (animais.length > 0) { %>
    <div class="row">
      <% animais.forEach(animal => { %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card shadow-sm border-0">
            <!-- IMAGEM -->
            <img 
              src="<%= animal.imagem && animal.imagem !== '' ? animal.imagem : '/img/placeholder.jpg' %>" 
              class="card-img-top" 
              alt="<%= animal.nome %>"
              style="height: 200px; object-fit: cover;"
            >
            
            <!-- INFORMAÇÕES -->
            <div class="card-body">
              <h5 class="card-title text-dark mb-2"><%= animal.nome %></h5>
              <p class="card-text text-muted small mb-3">
                <%= animal.descricao.length > 100 ? animal.descricao.substring(0, 100) + '...' : animal.descricao %>
              </p>
              
              <!-- BOTÕES -->
              <div class="d-flex gap-2">
                <a 
                  href="/admin/animaisAdd/edit/<%= animal.id %>" 
                  class="btn btn-outline-primary btn-sm flex-fill"
                >
                  Editar
                </a>
                <form 
                  method="POST" 
                  action="/admin/animaisAdd/delete" 
                  class="flex-fill"
                  onsubmit="return confirm('Tem certeza que deseja excluir?')"
                >
                  <input type="hidden" name="id" value="<%= animal.id %>">
                  <button type="submit" class="btn btn-outline-danger btn-sm w-100">
                    Excluir
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <!-- ESTADO VAZIO -->
    <div class="text-center py-5">
      <div class="text-muted mb-3">
        <i class="fas fa-paw fa-3x"></i>
      </div>
      <p class="text-muted">Nenhum animal cadastrado</p>
    </div>
  <% } %>
</div>

<%- include ("../../partials/footer.ejs") %>