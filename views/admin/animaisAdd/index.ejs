<%- include ("../../partials/header.ejs") %>
<%- include ("../../partials/navbar.ejs") %>

<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-5">
    <h2 class="section-title">ğŸ¾ Lista de Animais</h2>
    <a class="btn" href="/admin/animaisAdd/new">+ Cadastrar Novo Animal</a>
  </div>

  <% if (animais.length > 0) { %>
    <div class="room-grid">
      <% animais.forEach(animal => { %>
        <div class="room-card animate">
          <div class="room-image" 
               style="background-image: url('<%= animal.imagem && animal.imagem !== '' ? animal.imagem : '/img/placeholder.jpg' %>');">
          </div>
          <div class="room-info">
            <h3><%= animal.nome %></h3>
            <p><%= animal.descricao %></p>
            
            <div class="d-flex justify-content-between align-items-center">
              <a href="/admin/animaisAdd/edit/<%= animal.id %>" class="btn" style="background-color: var(--secondary-color);">Editar</a>
              
              <form method="POST" action="/admin/animaisAdd/delete" onsubmit="return confirmarDelecao(event)">
                <input type="hidden" name="id" value="<%= animal.id %>">
                <button class="btn" style="background-color: #B85C74;">Deletar</button>
              </form>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <div class="text-center">
      <p style="color: var(--secondary-color); font-size: 1.2rem;">Nenhum animal cadastrado ainda ğŸ•</p>
    </div>
  <% } %>
</div>

<%- include ("../../partials/footer.ejs") %>

<script>
  function confirmarDelecao(event) {
    event.preventDefault();
    if (confirm("VocÃª tem certeza que deseja deletar este animal?")) {
      event.target.submit();
    }
  }

  // animaÃ§Ã£o suave ao carregar
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".room-card").forEach((card, index) => {
      setTimeout(() => card.classList.add("animate"), index * 150);
    });
  });
</script>
